{
  "info": {
    "name": "TradingBot - Luxalgo Webhook Tests",
    "description": "Complete test collection for all webhook patterns (Entry, SL, TP1-TP5)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "webhook_url",
      "value": "https://your-app.koyeb.app/webhook",
      "type": "string"
    },
    {
      "key": "webhook_secret",
      "value": "your-webhook-secret-here",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. ENTRY - LONG with TP/SL (CORRECT FORMAT)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"entry\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"size_type\": \"percent\",\n  \"size\": 1.0,\n  \"leverage\": 20,\n  \"tp1\": 93000,\n  \"tp2\": 94000,\n  \"tp3\": 95000,\n  \"sl\": 87000,\n  \"tag\": \"#signal\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test LONG entry with TP1-3 and Stop Loss - Cornix text format"
      },
      "response": []
    },
    {
      "name": "2. ENTRY - SHORT with TP/SL (CORRECT FORMAT)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"entry\",\n  \"side\": \"short\",\n  \"symbol\": \"BYBIT:ETHUSDT.P\",\n  \"size_type\": \"percent\",\n  \"size\": 2.0,\n  \"leverage\": 10,\n  \"tp1\": 3100,\n  \"tp2\": 3050,\n  \"tp3\": 3000,\n  \"sl\": 3250,\n  \"tag\": \"#scalp\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test SHORT entry with TP1-3 and Stop Loss - Cornix text format"
      },
      "response": []
    },
    {
      "name": "3. ENTRY - LONG with ALL TP levels (TP1-5)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"entry\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"size_type\": \"percent\",\n  \"size\": 1.0,\n  \"leverage\": 25,\n  \"tp1\": 93000,\n  \"tp2\": 94000,\n  \"tp3\": 95000,\n  \"tp4\": 96000,\n  \"tp5\": 97000,\n  \"sl\": 87000,\n  \"tag\": \"#full\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test LONG entry with all 5 TP levels and Stop Loss"
      },
      "response": []
    },
    {
      "name": "4. ENTRY - Minimum Required (only TP1 + SL)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"entry\",\n  \"side\": \"long\",\n  \"symbol\": \"BTCUSDT\",\n  \"size_type\": \"percent\",\n  \"size\": 1.0,\n  \"tp1\": 92000,\n  \"sl\": 88000\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test with minimum required fields - only TP1 and SL (no tag, no leverage)"
      },
      "response": []
    },
    {
      "name": "5. STOP-LOSS - LONG",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"sl\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test stop-loss for LONG position"
      },
      "response": []
    },
    {
      "name": "6. STOP-LOSS - SHORT",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"sl\",\n  \"side\": \"short\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test stop-loss for SHORT position"
      },
      "response": []
    },
    {
      "name": "7. TAKE-PROFIT 1",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"tp\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tp_number\": 1,\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test take-profit level 1"
      },
      "response": []
    },
    {
      "name": "8. TAKE-PROFIT 2",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"tp\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tp_number\": 2,\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test take-profit level 2"
      },
      "response": []
    },
    {
      "name": "9. TAKE-PROFIT 3",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"tp\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tp_number\": 3,\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test take-profit level 3"
      },
      "response": []
    },
    {
      "name": "10. TAKE-PROFIT 4",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"tp\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tp_number\": 4,\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test take-profit level 4"
      },
      "response": []
    },
    {
      "name": "11. TAKE-PROFIT 5",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"tp\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"tp_number\": 5,\n  \"tag\": \"SFP_SL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test take-profit level 5"
      },
      "response": []
    },
    {
      "name": "12. Simple Symbol (No Exchange Prefix)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"entry\",\n  \"side\": \"long\",\n  \"symbol\": \"BTCUSDT\",\n  \"size_type\": \"percent\",\n  \"size\": 1.0,\n  \"tag\": \"MANUAL\"\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Test with simple symbol format (no BYBIT: prefix)"
      },
      "response": []
    },
    {
      "name": "13. Invalid - Missing Action (Should Fail)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "{{webhook_secret}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"size_type\": \"percent\",\n  \"size\": 1.0\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Negative test - should return validation error"
      },
      "response": []
    },
    {
      "name": "14. Invalid - Wrong Secret (Should Fail)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "X-Webhook-Secret",
            "value": "wrong-secret"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"action\": \"entry\",\n  \"side\": \"long\",\n  \"symbol\": \"BYBIT:BTCUSDT.P\",\n  \"size_type\": \"percent\",\n  \"size\": 1.0\n}"
        },
        "url": {
          "raw": "{{webhook_url}}",
          "host": ["{{webhook_url}}"]
        },
        "description": "Negative test - should return 401 Unauthorized"
      },
      "response": []
    }
  ]
}
